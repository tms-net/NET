{"codeFragments":[{"label":"Calculate prime numbers using PLINQ","content":"            // Calculate prime numbers using a simple (unoptimized) algorithm.\r\n            \r\n            IEnumerable<int> numbers = Enumerable.Range (3, 100000-3);\r\n \r\n            var parallelQuery = from n in numbers.AsParallel()\r\n                                where Enumerable.Range (2, (int) Math.Sqrt (n)).All(i => n % i > 0)\r\n                                select n;            \r\n            \r\n            int[] primes = parallelQuery.ToArray();\r\n\r\n            foreach(var prime in primes) {\r\n                Console.WriteLine(prime);\r\n            }"},{"label":"Parallel Invoke example","content":"\t\tstatic void Main(string[] args)\r\n\t\t{\r\n\t\t\ttry\r\n\t\t\t{\r\n\t\t\t\t// var cts = new CancellationTokenSource();\r\n\t\t\t\t// cts.CancelAfter(10);\r\n\t\t\t\tParallel.Invoke(\r\n\t\t\t\t\t// new ParallelOptions {\r\n\t\t\t\t\t// \t\tCancellationToken = new CancellationToken(true)\r\n\t\t\t\t\t// \t},\r\n\t\t\t\t\t() => new WebClient().DownloadFile(\"http://www.google.com\", \"google.html\"),\r\n\t\t\t\t\t() => new WebClient().DownloadFile(\"http://www.jaoo.dk\", \"jaoo.html\"));\r\n                \r\n                Console.WriteLine(\"Downloaded!\");\r\n\t\t\t}\r\n\t\t\tcatch (Exception ex)\r\n\t\t\t{\r\n\t\t\t\tConsole.WriteLine(ex);\r\n\t\t\t}\r\n\t\t}"},{"label":"Parallel.For example","content":"\t\tstatic void Main(string[] args)\r\n\t\t{\r\n\t\t\ttry\r\n\t\t\t{\r\n\t\t\t\tvar keyPairs = new string[20];\r\n\r\n\t\t\t\tvar sw = new Stopwatch();\r\n\t\t\t\tsw.Start();\r\n\r\n\t\t\t\t//for (int i = 0; i < keyPairs.Length; i++)\r\n\t\t\t\tParallel.For(0, keyPairs.Length, i =>\r\n\t\t\t\t\tkeyPairs[i] = RSA.Create().ToXmlString(true));\r\n\r\n\t\t\t\tsw.Stop();\r\n\t\t\t\tConsole.WriteLine($\"Calculated {keyPairs.Length} key pairs in {sw.ElapsedMilliseconds} ms\");\r\n\t\t\t}\r\n\t\t\tcatch (Exception ex)\r\n\t\t\t{\r\n\t\t\t\tConsole.WriteLine(ex);\r\n\t\t\t}\r\n\r\n\t\t}"},{"label":"Parallel For example","content":"\t\tstatic void Main(string[] args)\r\n\t\t{\r\n\t\t\ttry\r\n\t\t\t{\r\n\t\t\t\tint i = 0;\r\n\t\t\t\t//Parallel.ForEach(\"Hello, world\", c => // (c, state, i)\r\n\t\t\t\tforeach (char c in \"Hello, world\")\r\n\t\t\t\t{\r\n\t\t\t\t\t/*if (c == ',')\r\n\t\t\t\t\t\t break;\r\n\t\t\t\t\t\t //state.Break();\r\n\t\t\t\t\telse*/\r\n\t\t\t\t\t\t//Console.Write(c);\r\n\t\t\t\t\t\tConsole.WriteLine(c.ToString() + i++);\r\n\t\t\t\t\t\t//Console.WriteLine(c.ToString() + i);\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t//);\r\n\t\t\t}\r\n\t\t\tcatch (Exception ex)\r\n\t\t\t{\r\n\t\t\t\tConsole.WriteLine(ex);\r\n\t\t\t}\r\n\t\t}"}]}